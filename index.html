<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Blaze: easy reactive templating</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>

    <script type="text/javascript">
  if (document.location.host.match(/^(www\.)?meteor.com(:80)?$/)) {
    // Google analytics.
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30093278-1']);
    _gaq.push(['_setDomainName', 'www.meteor.com']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script>
      function htmlEncode (input) {
        return String(input)
        .replace(/&/g, '&amp;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, "'")
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
      }

      function renderExample (exampleName) {
        var $template = $("script[type='text/spacebars'][name='" + exampleName + "']");
        var templateText = $template.html().replace(/^ {10}/mg, ' ').trim();
        var codeText = $("script[type='text/spacebars-code'][name='" + exampleName + "']").text().replace(/^ {10}/mg, '').trim();
        eval(codeText);
        UI.insert(UI.render(Template[exampleName]), $("#" + exampleName + " .example-result").get(0));
        $("#" + exampleName + " .example-code").append($('<form class="lang-switch"><input id="' + exampleName + '-lang-spacebars" class="lang" type="radio" name="lang" value="spacebars" checked><label for="' + exampleName + '-lang-spacebars">Handlebars</label><input id="' + exampleName + '-lang-jade" class="lang" type="radio" name="lang" value="jade"><label for="' + exampleName + '-lang-jade">Jade</label></form>'));

        $("#" + exampleName + " .example-code").append($('<pre><code>' + htmlEncode(templateText) + '</code></pre>'));
        $("#" + exampleName + " .example-code").append($('<pre><code>' + codeText + '</code></pre>'));
      }
    </script>

    <link rel="stylesheet" href="highlight/styles/sunburst.css">
    <script src="highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="/blaze">Blaze</a></h1>
        <p>Easy reactive templating, by <b><a href="http://meteor.com" target="_blank">Meteor</a></b> (v0.1)</p>
        <p class="view"><a href="https://github.com/meteor/blaze" target="_blank">View the Project on GitHub <small>meteor/blaze</small></a></p>
        <ul>
          <li><a href="./docs.html" target="_blank">Read <strong>Docs</strong></a></li>
          <li><a href="https://groups.google.com/forum/#!forum/blazejs">Join the <strong>Discussion</strong></a></li>
          <li><a href="https://github.com/meteor/blaze">View on <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>

        <section class="light home-section">
          <div class="highlights-row">
            <div class="highlights-col">
              <h3>Extremely easy<br> to use</h3>
              <p>With Blaze, you can write your app with
                normal-looking templates in the language of your
                choice. You don't need to declare dependencies or
                write any code to manage how the screen updates: it's
                all automatic.</p>
            </div>
            <div class="highlights-col">
              <h3>High performance<br>&nbsp;</h3>
              <p>When your data changes, Blaze makes the smallest
              possible update to just the piece of the DOM that needs
              to change or move and batches those updates to minimize
              page reflows. Since most apps only update a few pieces
              of data at a time, this approach leads to very efficient
                updates.</p>
            </div>
            <div class="highlights-col">
              <h3>Works well with other libraries</h3>
              <p>Since Blaze only makes the smallest possible updates
                to the DOM, apps written with Blaze can take advantage
                of jQuery plugins or other JavaScript libraries that
                modify elements in your app &mdash; including the same
                elements managed by Blaze.</p>
            </div>
          </div>
        </section>
        <h2>Examples</h2>

        <p>
          The following examples show how to use Blaze in your apps. You
          can toggle the radio buttons in each example to change the
          template language from Spacebars (a dialect of Handlebars) to
          Jade; any template language can be compiled to a Blaze
          template.
        </p>

        <h3>Simplest data bindings</h3>

        <div id="example0" class="example-section">
          <div class="example-result">
            <div class="codepen"><a target="_blank" href="http://codepen.io/imslavko/pen/bcxus?editors=100">Open this on Codepen.io</a></div>
          </div>
          <div class="example-code"></div>
        </div>

        <script type="text/spacebars" name="example0">
          You spent <b>{{seconds}}</b> seconds on this page.
        </script>

        <script type="text/jade" name="example0">
          | You spent <b>#{seconds}</b> seconds on this page
        </script>


        <script type="text/spacebars-code" name="example0">
          var counter = new Blaze.Var(0);

          Template.example0.helpers({
            seconds: function () {
              return counter.get();
            }
          });

          setInterval(function () {
            counter.set(counter.get() + 1);
          }, 1000);
        </script>


        <h3>Use reactive variables in your code</h3>

        <p>Use Handlebar's style templates with helpers and reactive variables.</p>
        <div id="example1" class="example-section">
          <div class="example-result">
            <div class="codepen"><a target="_blank" href="http://codepen.io/imslavko/pen/hKjAD?editors=100">Open this on Codepen.io</a></div>
          </div>
          <div class="example-code"></div>
        </div>

        <script type="text/spacebars" name="example1">
          Click buttons to increase their values:
          <button id="number-a">{{a}}</button> &times; <button id="number-b">{{b}}</button> = {{c}}
        </script>

        <script type="text/jade" name="example1">
          | Click buttons to increase their values:
          button#number-a #{a}
          | &times;
          button#number-b #{b}
          | = #{c}
        </script>


        <script type="text/spacebars-code" name="example1">
          var numberA = new Blaze.Var(1);
          var numberB = new Blaze.Var(1);

          Template.example1.helpers({
            a: function () { return numberA.get(); },
            b: function () { return numberB.get(); },
            c: function () { return numberA.get() * numberB.get(); }
          });

          Template.example1.events({
            'click #number-a': function () {
              numberA.set(numberA.get() + 1);
            },
            'click #number-b': function () {
              numberB.set(numberB.get() + 1);
            }
          });
        </script>


        <h3>Intelligent DOM patching</h3>
        <p>Blaze will intelligently diff your data model and make batched minimal DOM
          changes. In this example a new &lt;div&gt; element will be inserted in the
          correct position.</p>

        <p>Blaze uses structure templates and an internal DOM
        representation that makes this possible.</p>

        <div id="example2" class="example-section">
          <div class="example-result">
            <div class="codepen"><a target="_blank" href="http://codepen.io/imslavko/pen/KhAyp?editors=100">Open this on Codepen.io</a></div>
          </div>
          <div class="example-code"></div>
        </div>

        <script type="text/spacebars" name="example2">
          <p><b>Contacts</b> <button id="toggle-order">{{order}}</button></p>
          {{#each contacts}}
            <div>{{.}}</div>
          {{/each}}

          <form>
            <input type="text" id="new-contact">
            <input type="submit" value="Add">
          </form>
        </script>

        <script type="text/jade" name="example2">
          p
            b Contacts
            button#toggle-order order
          each contacts
            div #{.}
          form
            input#new-contact(type='text')
            input(type='submit', value='Add')
        </script>


        <script type="text/spacebars-code" name="example2">
          var names = Blaze.Var(["Carl Friedrich Gauss", "Marie Curie",
                                 "Grace Hopper", "Claude Shannon",
                                 "Ada Lovelace", "Nikola Tesla" ]);

          var ascending = Blaze.Var(true);
          var sorted = function (arr) {
            var cloned = arr.slice(0);
            cloned.sort(); // sort in-place
            if (!ascending.get())
              cloned.reverse(); // reverse in-place
            return cloned;
          };

          Template.example2.helpers({
            order: function () { return ascending.get() ? 'A to Z' : 'Z to A'; },
            contacts: function () { return sorted(names.get()); }
          });

          Template.example2.events({
            'click #toggle-order': function () { ascending.set(! ascending.get()); },
            'submit form': function (evt, tmpl) {
              var allNames = names.get();
              // grab the new contact name from the DOM and clear the input field.
              var newName = tmpl.find('#new-contact').value;
              tmpl.find('#new-contact').value = '';
              names.set(allNames.concat([newName])); // update the data model
              return false; // don't try to submit a form
            }
          });
        </script>


        <h3>SVG support out of the box</h3>
        <p>Blaze manages SVG the same way it manages HTML, so you can
        conveniently combine regular HTML-based templates with simple
        SVG-based animations, where SVG-centric frameworks like d3.js
        would be overkill.</p>

        <div id="example3" class="example-section">
          <div class="example-result">
            <div class="codepen"><a target="_blank" href="http://codepen.io/imslavko/pen/uwiDF?editors=100">Open this on Codepen.io</a></div>
          </div>
          <div class="example-code"></div>
        </div>

        <script type="text/spacebars" name="example3">
          <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="-55 -55 110 110">
            <!-- bounding circle -->
            <circle style="stroke: black; fill: #eee;" cx="0" cy="0" r="50"/>

            <!-- hour, minute and second hands -->
            {{#with handData}}
              <line {{radial hourDegrees 0 .55}}
                    style="stroke-width: 3px; stroke: green;" />
              <line {{radial minuteDegrees 0 .85}}
                    style="stroke-width: 2px; stroke: blue;" />
              <line {{radial secondDegrees 0 .95}}
                    style="stroke-width: 1px; stroke: red;" />
            {{/with}}

            <!-- tick marks -->
            {{#each hours}}
              <line {{radial degrees 0.9 1}} style="stroke-width: 3px; stroke: black;"/>
            {{/each}}
          </svg>
        </script>

        <script type="text/jade" name="example3">
          svg(xmlns='http://www.w3.org/2000/svg', width='200', height='200', viewBox='-55 -55 110 110')
            // bounding circle
            circle(style='stroke: black; fill: #eee;', cx='0', cy='0', r='50')
            // hour, minute and second hands
            with handData
              line({{radial hourDegrees 0 .55}} style='stroke-width: 3px; stroke: green;')
              line({{radial minuteDegrees 0 .85}} style='stroke-width: 2px; stroke: blue;')
              line({{radial secondDegrees 0 .95}} style='stroke-width: 1px; stroke: red;')

            // tick marks
            each hours
              line({{radial degrees 0.9 1}} style='stroke-width: 3px; stroke: black;')
        </script>


        <script type="text/spacebars-code" name="example3">
          var date = Blaze.Var(new Date);

          // every second update the reactive time and date value
          setInterval(function () { date.set(new Date); }, 1000);

          Template.example3.helpers({
            hours: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
            degrees: function () { return 30 * this; },
            handData: function () {
              var time = date.get();
              return { hourDegrees: time.getHours() * 30,
                       minuteDegrees: time.getMinutes() * 6,
                       secondDegrees: time.getSeconds() * 6 };
            },
            radial: function (angleDegrees, startFraction, endFraction) {
              var r = 50;
              var radians = (angleDegrees-90) / 180 * Math.PI;
              return {
                x1: r * startFraction * Math.cos(radians),
                y1: r * startFraction * Math.sin(radians),
                x2: r * endFraction * Math.cos(radians),
                y2: r * endFraction * Math.sin(radians)
              };
            }
          });
        </script>

        <script src="javascripts/blaze.js"></script>

        <script type="text/javascript">
          renderExample("example0");
          renderExample("example1");
          renderExample("example2");
          renderExample("example3");

          $(document).delegate("input.lang", "click", function (evt) {
            var exampleCodeEl = $(this).parent().parent();
            var element = exampleCodeEl.find("pre code").first();
            var exampleSectionEl = exampleCodeEl.parent();
            var exampleName = exampleSectionEl.attr("id");
            var extractCode = function (el) {
              return htmlEncode(el.html().replace(/^ {10}/mg, ' ').trim());
            };
            var spacebarsTemplate = extractCode($("script[type='text/spacebars'][name='" + exampleName + "']"));
            var jadeTemplate = extractCode($("script[type='text/jade'][name='" + exampleName + "']"));

            if (evt.target.parentNode.lang.value === 'jade') {
              // need to switch to jade
              element.html(jadeTemplate);
              element.removeClass("spacebars");
              element.addClass("jade");
            } else {
              // need to switch to spacebars
              element.html(spacebarsTemplate);
              element.addClass("spacebars");
              element.removeClass("jade");
            }

            element.removeClass("hljs");
            hljs.highlightBlock(element[0]);

            element.removeClass("javascript");
          });
        </script>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/meteor">Meteor</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
  </body>
</html>
